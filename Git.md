# Git

*Git是一个版本管理控制系统（缩写VCS），它可以在任何时间点，将文档的状态作为更新记录保存起来，也可以在任何时间点，将更新记录恢复回来。*

### 1.1 Git 基本工作流程

| git仓库          | 暂存区             | 工作目录            |
| ---------------- | ------------------ | ------------------- |
| 用于存放提交记录 | 临时存放被修改文件 | 被Git管理的项目目录 |

![](D:\md\imgs\git的工作流程.png)

### 1.2 Git 的使用

#### 1.2.1 Git 使用前配置

在使用 git 前，需要告诉 git 你是谁，在向 git 仓库中提交时需要用到。

1. 配置提交人姓名：`git config --global user.name 提交人姓名`
2. 配置提交人姓名：`git config --global user.email 提交人邮箱` 
3. 查看git配置信息：`git config --list`   

**注意：** 

1. 如果要对配置信息进行修改，重复上述命令即可。

2. 配置只需要执行一次。

#### 1.2.2 提交步骤

1. `git init` 初始化git仓库
2. `git status` 查看文件状态
3. `git add 文件列表` 追踪文件
4. `git commit -m 提交信息`  向仓库中提交代码
5. `git log` 查看提交记录

1. `git reflog`记录给git执行的每一次命令
2. `git diff`查看修改的内容

#### 1.2.3 撤销

- 用暂存区中的文件覆盖工作目录中的文件： `git checkout -- 文件名`

  `git checkout -- <file>`：丢弃工作区中的修改

  1. 如果将文件修改后未添加到暂存区，可以`git checkout -- <file>`恢复
  2. 如果添加到暂存区了，先：`git reset HEAD <file>`把暂存区的修改撤销；再通过`git checkout -- <file>` 丢弃工作区中的修改

  

- 将文件从暂存区中删除： `git rm --cached 文件名`

  `git rm <file>`用于删除文件

- 将 git 仓库中指定的更新记录恢复出来，并且覆盖暂存区和工作目录：`git reset --hard commitID` `commitID`表示恢复的版本id

  `git reset --hard HEAD^` 回退到上一个版本
  上上一个版本是：`HEAD^^`
  往上100个版本是：`HEAD~100` 

  ![git中将文件恢复出来并覆盖暂存区和工作目录](D:\md\imgs\git中将文件恢复出来并覆盖暂存区和工作目录.png)

### 2.1 分支

为了便于理解，大家暂时可以认为分支就是当前工作目录中代码的一份副本。

使用分支，可以让我们从开发主线上分离出来，以免影响开发主线。

<img src="D:\md\imgs\git中的分支.png" style="zoom: 80%;" />



#### 2.1.1 分支细分

1. 主分支（master）：第一次向 git 仓库中提交更新记录时自动产生的一个分支。

   ![](D:\md\imgs\git中的主分支.png)

2. 、开发分支（develop）：作为开发的分支，基于 master 分支创建。

   <img src="D:\md\imgs\git中的开发分支.png" style="zoom: 50%;" />

3. 功能分支（feature）：作为开发具体功能的分支，基于开发分支创建

   <img src="D:\md\imgs\git中的功能分支.png" style="zoom:50%;" />

 **功能分支 -> 开发分支 -> 主分支** 

#### 2.1.2 分支命令

- `git branch` 查看分支

- `git branch 分支名称` 创建分支

- `git checkout 分支名称` 切换分支

- `git merge 来源分支` 合并分支

- `git branch -d 分支名称` 删除分支（分支被合并后才允许删除）（改为 -D 是强制删除即使没有被合并）

# gitHub

### 1.创建仓库

1. 先在GitHub上填写仓库基本信息
2. 将本地仓库推送到远程仓库
   1. git push 远程仓库地址 分支名称
   2. git push 远程仓库地址别名 分支名称

   3. git push -u 远程仓库地址别名 分支名称

      - -u 记住推送地址及分支，下次推送只需要输入  *git push*  即可

   4. git remote add 远程仓库地址别名 远程仓库地址  （为远程仓库起一个别名）

### 2. 拉取操作

#### 2.1克隆仓库

克隆远端数据仓库到本地（没有本地仓库）：**`git clone 仓库地址`** 

#### 2.2 拉取远程仓库中最新的版本

拉取远程仓库中最新的版本（已经有本地仓库了）：**`git pull 远程仓库地址 分支名称`**

- 如果远程仓库的版本 高于本地仓库的版本，此时本地仓库不能提交，必须先拉取源程仓库的内容，之后才能向远程仓库提交。

### 2.3 解决冲突

在多人同时开发一个项目时，如果两个人修改了同一个文件的同一个地方，就会发生冲突。冲突需要人为解决。

1. 先在远程仓库中拉取最新的版本
2. 然后更改，再重新提交

### 2.4 跨团队协作

1. 程序员 C fork仓库
2. 程序员 C 将仓库克隆在本地进行修改
3. 程序员 C 将仓库推送到远程
4. 程序员 C 发起pull reqest
5. 原仓库作者审核
6. 原仓库作者合并代码

### 2.5 ssh免登陆

<img src="D:\md\imgs\git中ssh免登录.png" style="zoom:80%;" />

1. 先在本地生成秘钥，使用 命令：**`ssh-keygen`** 

2. 秘钥存储目录：C:\Users\用户\\.ssh

3. 公钥名称：id_rsa.pub

4. 私钥名称：id_rsa

### 2.6 GIT忽略清单

将不需要被git管理的文件名字添加到此文件中，在执行git命令的时候，git就会忽略这些文件。

git忽略清单文件名称：**.gitignore**

将工作目录中的文件全部添加到暂存区：`git add .` 

### 3.9 添加说明文件

建立 `readme.md`  文件，并添加到远程仓库中

